
	<div id="mainContent">
	<div class="forFlow">
		
<div id="post_detail">
<!--done-->
<div id="topics">
	<div class="post">
		<h1 class="postTitle">
			<a id="cb_post_title_url" class="postTitle2" href="http://www.cnblogs.com/xguo/p/6077343.html">Openstack+Kubernetes+Docker&#x5FAE;&#x670D;&#x52A1;&#x5B9E;&#x8DF5;&#x4E4B;&#x8DEF;--Docker&#x548C;Registry2</a>
		</h1>
		<div class="clear"></div>
		<div class="postBody">
			<div id="cnblogs_post_body" class="cnblogs-markdown"><p>&#x6E10;&#x5165;&#x4F73;&#x5883;&#xFF0C;&#x6211;&#x4EEC;&#x5F00;&#x59CB;&#x6BD4;&#x8F83;&#x5177;&#x4F53;&#x7684;&#x5DE5;&#x4F5C;&#xFF0C;&#x7531;&#x4E8E;Docker&#x662F;&#x4E00;&#x4E2A;&#x57FA;&#x7840;&#x7EC4;&#x4EF6;&#xFF0C;&#x6240;&#x4EE5;&#x672C;&#x6587;&#x7684;&#x4E3B;&#x9898;&#x662F;Docker&#x548C;Registry2&#x3002;</p>
<p>&#x5E95;&#x5C42;&#x7CFB;&#x7EDF;&#x57FA;&#x4E8E;Centos7&#xFF0C;&#x5148;&#x5728;&#x4E00;&#x53F0;&#x4E91;&#x4E3B;&#x673A;&#x4E0A;&#x5B89;&#x88C5;Docker&#xFF0C;Docker&#x7684;&#x5B89;&#x88C5;&#x975E;&#x5E38;&#x7B80;&#x5355;&#xFF0C;&#x53C2;&#x8003;&#x5B98;&#x7F51;Docker Centos&#x90E8;&#x5206;&#x5B89;&#x88C5;&#x6307;&#x5BFC;&#x53EA;&#x9700;&#x8981;&#x51E0;&#x6B65;&#xFF0C;&#x5B89;&#x88C5;&#x597D;&#x4E4B;&#x540E;&#x5F00;&#x59CB;&#x4EE5;&#x4E0B;&#x914D;&#x7F6E;&#x3002;</p>
<h3 id="&#x5173;&#x95ED;&#x9632;&#x706B;&#x5899;">&#x5173;&#x95ED;&#x9632;&#x706B;&#x5899;</h3>
<pre><code>service firewalld stop
systemctl disable firewalld.service</code></pre>
<h3 id="docker-1.12-&#x7981;&#x7528;stlhttps&#x767B;&#x5F55;regisry">Docker 1.12 &#x7981;&#x7528;STL&#xFF08;HTTPS&#xFF09;&#x767B;&#x5F55;Regisry</h3>
<p>&#x914D;&#x7F6E;Docker&#x901A;&#x8FC7;STL&#x548C;Registry&#x901A;&#x8BAF;&#x6BD4;&#x8F83;&#x9EBB;&#x70E6;&#xFF0C;&#x7531;&#x4E8E;&#x662F;&#x4E48;&#x6709;&#x4E91;&#x73AF;&#x5883;&#xFF0C;&#x5C31;&#x7D22;&#x6027;&#x7981;&#x7528;&#x4E86;&#xFF0C;</p>
<pre><code>vim /usr/lib/systemd/system/docker.service
#ExecStart=/usr/bin/dockerd 
ExecStart=/usr/bin/dockerd --insecure-registry registry2.io </code></pre>
<p>&#x914D;&#x7F6E;&#x597D;&#x4EE5;&#x540E;&#x9700;&#x8981;&#x91CD;&#x542F;Docker&#x670D;&#x52A1;&#x751F;&#x6548;&#xFF0C;<strong>registry2.io</strong> &#x662F;&#x6211;&#x4EEC;&#x7ED9;Registry&#x6307;&#x5B9A;&#x7684;&#x57DF;&#x540D;&#xFF01;</p>
<blockquote>
<p>&#x6CE8;&#x610F;&#xFF1A;&#x914D;&#x7F6E;&#x597D;&#x4EE5;&#x540E;&#x5728;Openstack&#x754C;&#x9762;&#x4E0A;&#x4E3A;&#x6B64;&#x4E91;&#x4E3B;&#x673A;&#x751F;&#x6210;&#x5FEB;&#x7167;&#xFF0C;&#x5728;&#x4EE5;&#x540E;&#x521B;&#x5EFA;&#x7684;&#x4E91;&#x4E3B;&#x673A;&#x5C06;&#x4EE5;&#x6B64;&#x4E3A;&#x7CFB;&#x7EDF;&#x57FA;&#x7840;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x7EAF;&#x51C0;&#x7684;Centos7&#xFF0C;&#x8FD9;&#x6837;&#x53EF;&#x4EE5;&#x8282;&#x7EA6;&#x5F88;&#x591A;&#x65F6;&#x95F4;&#xFF01;</p>
</blockquote>
<h3 id="registry">Registry</h3>
<p>&#x6211;&#x4EEC;&#x91C7;&#x7528;Vmware&#x7684;Harbor&#x505A;&#x4E3A;&#x76F4;&#x63A5;&#x4F7F;&#x7528;Registry2&#x7684;&#x66FF;&#x4EE3;&#xFF0C;&#x53F7;&#x79F0;&#x662F;&#x4F01;&#x4E1A;&#x7EA7;&#x7684;&#x79C1;&#x6709;&#x955C;&#x50CF;&#x4ED3;&#x5E93;&#xFF0C;Harbor&#x652F;&#x6301;&#x4E2D;&#x6587;&#x800C;&#x4E14;&#x529F;&#x80FD;&#x5168;&#x9762;&#xFF0C;&#x53EF;&#x4EE5;&#x5728;&#x7EBF;&#x591A;&#x9879;&#x76EE;&#x7BA1;&#x7406;Images&#x5305;&#x62EC;&#x641C;&#x7D22;&#x3001;&#x5220;&#x9664;&#x7B49;&#x529F;&#x80FD;&#xFF0C;&#x6700;&#x4E3B;&#x8981;&#x7684;&#x662F;&#x5B89;&#x88C5;&#x4E5F;&#x7279;&#x522B;&#x7B80;&#x5355;&#xFF0C;Harbor&#x5BF9;&#x4E8E;Registry2&#x7701;&#x53BB;&#x4E00;&#x4E9B;&#x79D8;&#x94A5;&#x3001;&#x8BC1;&#x4E66;&#x7684;&#x751F;&#x6210;&#x7B49;&#x7E41;&#x6742;&#x7684;&#x914D;&#x7F6E;&#x800C;&#x4E14;&#x529F;&#x80FD;&#x66F4;&#x5F3A;&#x5927;&#x3002;</p>
<p>&#x9879;&#x76EE;&#x4E3B;&#x9875;https://github.com/vmware/harbor/ &#x5B89;&#x88C5;&#x540C;&#x6837;&#x975E;&#x5E38;&#x7B80;&#x5355;&#xFF0C;&#x7528;Docker&#x5FEB;&#x7167;&#x521B;&#x5EFA;&#x4E91;&#x4E3B;&#x673A;&#xFF0C;&#x5B89;&#x88C5;&#x8BF7;&#x53C2;&#x8003;&#x5B98;&#x65B9;&#x5B89;&#x88C5;&#x6307;&#x5BFC;&#x548C; <a href="http://www.xf80.com/2016/10/10/docker-harbor/" class="uri">http://www.xf80.com/2016/10/10/docker-harbor/</a></p>
<p>Harbor&#x901A;&#x8FC7;Docker Compose&#x5B89;&#x88C5;&#x7684;&#xFF0C;&#x4F7F;&#x7528; docker-compose stop &#x548C; docker-compose rm &#x53EF;&#x4EE5;&#x505C;&#x6B62;&#x548C;&#x5220;&#x9664;Harbor&#x3002;</p>
<p>&#x914D;&#x7F6E;Harbor&#xFF0C;Harbor.cfg</p>
<p><img src="http://images2015.cnblogs.com/blog/57355/201611/57355-20161118130033373-257608506.png"></p>
<p>&#x6307;&#x5B9A;hostname&#x548C;harbor_admin_password&#xFF0C;&#x5982;&#x679C;&#x662F;&#x7EBF;&#x4E0A;&#x4F7F;&#x7528;&#x8FD8;&#x8981;&#x914D;&#x7F6E;&#x5916;&#x90E8;&#x5B58;&#x50A8;&#x3001;&#x4E3B;&#x4ECE;&#x3001;&#x90AE;&#x7BB1;&#x7B49;&#x3002;</p>
<p>&#x5B89;&#x88C5;&#x540E;&#x8FD0;&#x884C;&#x6548;&#x679C;</p>
<p><img src="http://images2015.cnblogs.com/blog/57355/201611/57355-20161118130059092-1005319431.png"></p>
<p><img src="http://images2015.cnblogs.com/blog/57355/201611/57355-20161118130114654-1764186424.png"></p>
<p><img src="http://images2015.cnblogs.com/blog/57355/201611/57355-20161118130126670-1944005513.png"></p>
<h3 id="docker&#x767B;&#x5F55;registry">Docker&#x767B;&#x5F55;Registry</h3>
<p>&#x5728;docker&#x7684;&#x4E91;&#x4E3B;&#x673A;&#x4E0A;&#x8FD0;&#x884C;</p>
<pre><code>docker login registry2.io</code></pre>
<p>&#x63D0;&#x793A;&#x8F93;&#x5165;&#x7528;&#x6237;&#x540D;&#x548C;&#x5BC6;&#x7801;&#xFF08;&#x5728;&#x4E0A;&#x9762;&#x914D;&#x7F6E;&#x7684;&#xFF09;&#x5C31;&#x53EF;&#x6B63;&#x5E38;&#x767B;&#x5F55;&#x5230;Harbor&#xFF0C;&#x4E4B;&#x540E;&#x5C31;&#x53EF;&#x4EE5;Push&#x548C;Pull&#x7B49;&#x64CD;&#x4F5C;&#x4E86;&#x3002;</p>
</div><div id="MySignature"></div>
<div class="clear"></div>
<div id="blog_post_info_block">
<div id="BlogPostCategory"></div>
<div id="EntryTag"></div>
<div id="blog_post_info">
</div>
<div class="clear"></div>
<div id="post_next_prev"></div>
</div>


		</div>
		<div class="postDesc">posted @ <span id="post-date">2016-11-18 13:05</span> <a href="http://www.cnblogs.com/xguo/">&#x7267;&#x9A6C;&#x6E38;&#x5B50;</a> &#x9605;&#x8BFB;(<span id="post_view_count">...</span>) &#x8BC4;&#x8BBA;(<span id="post_comment_count">...</span>)  <a href="https://i.cnblogs.com/EditPosts.aspx?postid=6077343" rel="nofollow">&#x7F16;&#x8F91;</a> <a href="#" onclick="AddToWz(6077343);return false;">&#x6536;&#x85CF;</a></div>
	</div>
	<script src="//common.cnblogs.com/highlight/9.1.0/highlight.min.js?id=20160127"></script><script>markdown_highlight();</script><script type="text/javascript">var allowComments=true,cb_blogId=54651,cb_entryId=6077343,cb_blogApp=currentBlogApp,cb_blogUserGuid='c8b90a73-3a1d-de11-9510-001cf0cd104b',cb_entryCreatedDate='2016/11/18 13:05:00';loadViewCount(cb_entryId);</script>
	
</div><!--end: topics 文章、评论容器-->
</div><a name="!comments"></a><div id="blog-comments-placeholder"></div><script type="text/javascript">var commentManager = new blogCommentManager();commentManager.renderComments(0);</script>
<div id="comment_form" class="commentform">
<a name="commentform"></a>
<div id="divCommentShow"></div>
<div id="comment_nav"><span id="span_refresh_tips"></span><a href="javascript:void(0);" onclick="return RefreshCommentList();" id="lnk_RefreshComments" runat="server" clientidmode="Static">&#x5237;&#x65B0;&#x8BC4;&#x8BBA;</a><a href="#" onclick="return RefreshPage();">&#x5237;&#x65B0;&#x9875;&#x9762;</a><a href="#top">&#x8FD4;&#x56DE;&#x9876;&#x90E8;</a></div>
<div id="comment_form_container"></div>
<div class="ad_text_commentbox" id="ad_text_under_commentbox"></div>
<div id="ad_t2"></div>
<div id="opt_under_post"></div>
<div id="ad_c1" class="c_ad_block"></div>
<div id="under_post_news"></div>
<div id="ad_c2" class="c_ad_block"></div>
<div id="under_post_kb"></div>
<div id="HistoryToday" class="c_ad_block"></div>
<script type="text/javascript">
    fixPostBody();
    setTimeout(function () { incrementViewCount(cb_entryId); }, 50);
    deliverAdT2();
    deliverAdC1();
    deliverAdC2();    
    loadNewsAndKb();
    loadBlogSignature();
    LoadPostInfoBlock(cb_blogId, cb_entryId, cb_blogApp, cb_blogUserGuid);
    GetPrevNextPost(cb_entryId, cb_blogId, cb_entryCreatedDate);
    loadOptUnderPost();
    GetHistoryToday(cb_blogId, cb_blogApp, cb_entryCreatedDate);   
</script>
</div>


	</div><!--end: forFlow -->
	</div><!--end: mainContent 主体内容容器-->

	<div id="sideBar">
		<div id="sideBarMain">
			
<!--done-->
<div class="newsItem">
<h3 class="catListTitle">&#x516C;&#x544A;</h3>
	<div id="blog-news"></div><script type="text/javascript">loadBlogNews();</script>
</div>

			<div id="blog-calendar" style="display:none"></div><script type="text/javascript">loadBlogDefaultCalendar();</script>
			
			<div id="leftcontentcontainer">
				<div id="blog-sidecolumn"></div><script type="text/javascript">loadBlogSideColumn();</script>
			</div>
			
		</div><!--end: sideBarMain -->
	</div><!--end: sideBar 侧边栏容器 -->
	<div class="clear"></div>
	