
	<div id="mainContent">
	<div class="forFlow">
		
<div id="post_detail">
<!--done-->
<div id="topics">
	<div class="post">
		<h1 class="postTitle">
			<a id="cb_post_title_url" class="postTitle2" href="http://www.cnblogs.com/wenjiang/p/6067562.html">&#x5BFB;&#x627E;Fragment&#x7684;&#x66FF;&#x4EE3;&#x54C1;&#x7684;&#x5C1D;&#x8BD5;</a>
		</h1>
		<div class="clear"></div>
		<div class="postBody">
			<div id="cnblogs_post_body"><p>&#xA0; &#xA0; &#x81EA;&#x4ECE;Android&#x5728;3.0&#x63A8;&#x51FA;Fragment&#x4E4B;&#x540E;&#xFF0C;&#x73B0;&#x5728;&#x5F88;&#x591A;&#x5E94;&#x7528;&#x7684;&#x8BBE;&#x8BA1;&#x90FD;&#x662F;&#x5EFA;&#x7ACB;&#x5728;Fragment&#x7684;&#x57FA;&#x7840;&#x4E0A;&#xFF0C;&#x50CF;&#x662F;&#x591A;&#x4E2A;tab&#x5207;&#x6362;&#x8FD9;&#x79CD;&#x9700;&#x6C42;&#xFF0C;&#x5C31;&#x53EF;&#x4EE5;&#x4F7F;&#x7528;Fragment&#xFF0C;&#x5E76;&#x4E14;Fragment&#x63D0;&#x4F9B;&#x4E86;&#x4E00;&#x7CFB;&#x5217;&#x751F;&#x547D;&#x5468;&#x671F;&#x7684;&#x56DE;&#x8C03;&#xFF0C;&#x53EF;&#x4EE5;&#x5E2E;&#x52A9;&#x6211;&#x4EEC;&#x5B9E;&#x73B0;&#x5F88;&#x591A;&#x7279;&#x6B8A;&#x7684;&#x9700;&#x6C42;&#xFF0C;&#x50CF;&#x662F;&#x6570;&#x636E;&#x4FDD;&#x5B58;&#x548C;&#x6062;&#x590D;&#x7B49;&#x3002;</p>
<p>&#xA0; &#xA0; Fragment&#x672C;&#x8EAB;&#x7684;&#x51FA;&#x73B0;&#x662F;&#x4E3A;&#x4E86;&#x89E3;&#x51B3;&#x5E73;&#x677F;&#x591A;&#x5C4F;&#x754C;&#x9762;&#x5C55;&#x793A;&#x95EE;&#x9898;&#xFF0C;&#x56E0;&#x4E3A;&#x5E73;&#x677F;&#x53EF;&#x4EE5;&#x5C55;&#x793A;&#x6BD4;&#x624B;&#x673A;&#x66F4;&#x591A;&#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x6240;&#x4EE5;&#x4F7F;&#x7528;Fragment&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x6839;&#x636E;&#x4E0D;&#x540C;&#x5C3A;&#x5BF8;&#x5C55;&#x793A;&#x4E0D;&#x540C;&#x5185;&#x5BB9;&#x7684;&#x9700;&#x6C42;&#xFF0C;&#x800C;&#x8FD9;&#x4E0D;&#x540C;&#x5185;&#x5BB9;&#x66F4;&#x591A;&#x662F;&#x6307;&#x5728;&#x66F4;&#x5927;&#x7684;&#x5C3A;&#x5BF8;&#x663E;&#x793A;&#x66F4;&#x591A;&#x7684;&#x5185;&#x5BB9;&#x3002;</p>
<p>&#xA0; &#xA0; &#x968F;&#x7740;&#x4EBA;&#x4EEC;&#x7684;&#x5B9E;&#x9645;&#x7F16;&#x7801;&#x5DE5;&#x4F5C;&#xFF0C;&#x53D1;&#x73B0;&#x4F7F;&#x7528;Fragment&#x53EF;&#x4EE5;&#x66F4;&#x597D;&#x7684;&#x7BA1;&#x7406;&#x754C;&#x9762;&#xFF0C;&#x56E0;&#x4E3A;&#x4E00;&#x4E2A;Activity&#x53EF;&#x4EE5;&#x7BA1;&#x7406;&#x591A;&#x4E2A;Fragment&#xFF0C;&#x5982;&#x679C;&#x5C06;Fragment&#x5F53;&#x505A;&#x4E00;&#x4E2A;&#x754C;&#x9762;&#xFF0C;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x5B9E;&#x73B0;&#x591A;&#x4E2A;&#x754C;&#x9762;&#x7684;&#x5207;&#x6362;&#xFF0C;&#x5E76;&#x4E14;&#x8FD9;&#x79CD;&#x5DE5;&#x4F5C;&#x6BD4;&#x8D77;&#x4EE5;&#x524D;&#x5728;&#x5E03;&#x5C40;&#x6587;&#x4EF6;&#x4E2D;&#x63A7;&#x5236;&#x53EF;&#x89C1;&#x6765;&#x8BB2;&#xFF0C;&#x66F4;&#x597D;&#x7BA1;&#x7406;&#xFF0C;&#x5E76;&#x4E14;&#x5E03;&#x5C40;&#x53EF;&#x4EE5;&#x590D;&#x7528;&#xFF0C;&#x5BFC;&#x81F4;Activity&#x7684;&#x4F5C;&#x7528;&#x5C31;&#x53EA;&#x662F;Fragment&#x7684;&#x7BA1;&#x7406;&#x5BB9;&#x5668;&#x800C;&#x5DF2;&#xFF0C;&#x52A0;&#x4E0A;Fragment&#x62E5;&#x6709;&#x548C;Activity&#x540C;&#x6B65;&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;&#xFF0C;&#x6240;&#x4EE5;&#x5F88;&#x591A;&#x4E1A;&#x52A1;&#x5DE5;&#x4F5C;&#x90FD;&#x53EF;&#x4EE5;&#x653E;&#x5728;Fragment&#x4E2D;&#x3002;</p>
<p>&#xA0; &#xA0; &#x73B0;&#x5728;&#x5F88;&#x591A;&#x754C;&#x9762;&#x7684;&#x5F00;&#x53D1;&#x5DE5;&#x4F5C;&#x90FD;&#x662F;&#x4F7F;&#x7528;Activity&#x52A0;&#x591A;&#x4E2A;Fragment&#x7684;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;&#xFF0C;&#x8FD9;&#x662F;&#x5F88;&#x597D;&#x7684;&#x65B9;&#x5F0F;&#xFF0C;&#x4F46;&#x8981;&#x60F3;&#x5B8C;&#x5168;&#x638C;&#x63E1;Fragment&#x8FD9;&#x4E2A;&#x5229;&#x5668;&#xFF0C;&#x9700;&#x8981;&#x4E86;&#x89E3;&#x7684;&#x5DE5;&#x4F5C;&#x975E;&#x5E38;&#x591A;&#xFF0C;&#x5E76;&#x4E14;&#x6709;&#x5173;Fragment&#x53EF;&#x4EE5;&#x5F00;&#x5C55;&#x76F8;&#x5F53;&#x591A;&#x7684;&#x8BDD;&#x9898;&#xFF0C;&#x50CF;&#x662F;Fragment&#x4E4B;&#x95F4;&#x7684;&#x53C2;&#x6570;&#x4F20;&#x9012;&#xFF0C;Fragment&#x4E4B;&#x95F4;&#x7684;&#x5207;&#x6362;&#x548C;&#x72B6;&#x6001;&#x7684;&#x4FDD;&#x5B58;&#xFF0C;&#x7B49;&#x7B49;&#xFF0C;&#x8FD9;&#x4E9B;&#x90FD;&#x662F;&#x76F8;&#x5F53;&#x5927;&#x7684;&#x8303;&#x56F4;&#xFF0C;&#x800C;&#x4E14;&#x8C37;&#x6B4C;&#x4E5F;&#x770B;&#x5230;Fragment&#x7684;&#x4F7F;&#x7528;&#x524D;&#x666F;&#xFF0C;&#x5C01;&#x88C5;&#x4E86;DialogFrament&#xFF0C;ListFragment&#x7B49;&#x65B9;&#x4FBF;&#x5F00;&#x53D1;&#x8005;&#x4F7F;&#x7528;&#xFF0C;Fragment&#x548C;Activity&#x4E4B;&#x95F4;&#x751F;&#x547D;&#x5468;&#x671F;&#x7684;&#x5173;&#x7CFB;&#xFF0C;&#x8FD8;&#x53EF;&#x4EE5;&#x505A;&#x76D1;&#x542C;Activity&#x751F;&#x547D;&#x5468;&#x671F;&#x5B9E;&#x73B0;&#x67D0;&#x4E9B;&#x529F;&#x80FD;&#xFF0C;&#x50CF;&#x662F;&#x7ED3;&#x675F;&#x7684;&#x65F6;&#x5019;&#x505C;&#x6B62;&#x5F53;&#x524D;&#x5F02;&#x6B65;&#x4EFB;&#x52A1;&#x7B49;&#x9700;&#x6C42;&#x3002;</p>
<p>&#xA0; &#xA0; &#x4ED4;&#x7EC6;&#x770B;Fragment&#x7684;&#x4EE3;&#x7801;&#xFF0C;&#x6211;&#x4EEC;&#x53D1;&#x73B0;&#x8FD9;&#x65E0;&#x975E;&#x5C31;&#x662F;&#x5728;Activity&#x7684;&#x5E03;&#x5C40;&#x4E2D;&#x6307;&#x5B9A;&#x7684;&#x5730;&#x65B9;&#x6DFB;&#x52A0;&#x76F8;&#x5E94;&#x7684;&#x5E03;&#x5C40;&#xFF0C;&#x7136;&#x540E;&#x7ED1;&#x5B9A;&#x4E00;&#x5806;&#x76D1;&#x542C;&#x7528;&#x4EE5;&#x5B9E;&#x73B0;&#x5404;&#x79CD;&#x751F;&#x547D;&#x5468;&#x671F;&#x7684;&#x56DE;&#x8C03;&#x3002;</p>
<p>&#xA0; &#xA0; &#x6211;&#x4EEC;&#x751A;&#x81F3;&#x53EF;&#x4EE5;&#x6A21;&#x62DF;Android&#x6E90;&#x7801;&#xFF0C;&#x81EA;&#x5DF1;&#x641E;&#x4E00;&#x4E2A;Fragment&#x7684;&#x66FF;&#x4EE3;&#x54C1;&#x3002;</p>
<p>&#xA0; &#xA0; &#x6211;&#x4EEC;&#x8FD9;&#x6B21;&#x7684;&#x5C1D;&#x8BD5;&#x662F;&#x5B9E;&#x73B0;Fragment&#x754C;&#x9762;&#x590D;&#x7528;&#x7684;&#x529F;&#x80FD;&#xFF0C;&#x8FD9;&#x662F;&#x6700;&#x5E38;&#x7528;&#x7684;&#x573A;&#x666F;&#x3002;</p>
<p>&#xA0; &#xA0; &#x5BF9;&#x5E94;FragmentManager&#xFF0C;&#x6211;&#x4EEC;&#x7528;ViewHolderManager&#x6765;&#x7BA1;&#x7406;View&#xFF0C;&#x5BF9;&#x5E94;Fragment&#xFF0C;&#x7528;PartViewHolder&#x3002;</p>
<p>&#xA0; &#xA0; &#x4E3A;&#x4E86;&#x65B9;&#x4FBF;&#x6211;&#x4EEC;&#x66FF;&#x6362;View&#x7684;&#x65F6;&#x5019;&#x80FD;&#x591F;&#x66F4;&#x5FEB;&#x7684;&#x627E;&#x5230;&#x5BF9;&#x5E94;&#x7684;View&#xFF0C;&#x9700;&#x8981;&#x4E00;&#x4E2A;HashMap&#xFF0C;&#x7C7B;&#x4F3C;FragmentManager&#x5728;&#x67E5;&#x627E;Fragment&#x4E00;&#x6837;&#xFF0C;key&#x503C;&#x4E3A;&#x6211;&#x4EEC;&#x6307;&#x5B9A;&#x7684;id&#xFF0C;value&#x5219;&#x662F;&#x5BF9;&#x5E94;&#x7684;PartViewHolder&#x3002;</p>
<p>&#xA0; &#xA0; PartViewHolder&#x53EA;&#x662F;&#x4E00;&#x4E2A;&#x62BD;&#x8C61;&#xFF0C;&#x5B83;&#x8868;&#x793A;&#x7684;&#x662F;View&#x7684;&#x5360;&#x4F4D;&#xFF0C;&#x66F4;&#x786E;&#x5207;&#x7684;&#x8BF4;&#xFF0C;&#x662F;View&#x7684;&#x63A7;&#x5236;&#x7C7B;&#xFF0C;&#x56E0;&#x6B64;&#x5B83;&#x5177;&#x6709;&#x4E00;&#x4E9B;&#x5171;&#x540C;&#x7684;&#x884C;&#x4E3A;&#xFF0C;&#x5B9E;&#x73B0;&#x4E0A;&#x662F;&#x4E00;&#x4E2A;&#x62BD;&#x8C61;&#x7C7B;&#x3002;</p>
<p>&#xA0; &#xA0; &#x5728;Java&#x4E2D;&#xFF0C;&#x5B9A;&#x4E49;&#x4E00;&#x7EC4;&#x62BD;&#x8C61;&#x6709;&#x4E24;&#x79CD;&#xFF1A;&#x62BD;&#x8C61;&#x7C7B;&#x548C;&#x63A5;&#x53E3;&#xFF0C;&#x8FD9;&#x4E24;&#x79CD;&#x90FD;&#x662F;&#x591A;&#x6001;&#x7684;&#x8868;&#x73B0;&#x3002;&#x62BD;&#x8C61;&#x7C7B;&#x8868;&#x793A;&#x7684;&#x662F;&quot;is a&quot;&#x7684;&#x5173;&#x7CFB;&#xFF0C;&#x800C;&#x63A5;&#x53E3;&#x8868;&#x793A;&#x7684;&#x662F;&quot;has a&quot;&#x7684;&#x5173;&#x7CFB;&#x3002;&#x6211;&#x4EEC;&#x89C1;&#x8FC7;&#x4E00;&#x4E9B;&#x4EE3;&#x7801;&#xFF0C;&#x7C7B;&#x4F3C;Duck&#x8FD9;&#x7C7B;&#x7684;&#x540D;&#x5B57;&#xFF0C;&#x7ADF;&#x7136;&#x53EA;&#x662F;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#xFF0C;&#x63A5;&#x53E3;&#x4EE3;&#x8868;&#x7684;&#x5E94;&#x8BE5;&#x662F;&#x4E00;&#x7EC4;&#x884C;&#x4E3A;&#x534F;&#x8BAE;&#xFF0C;&#x7C7B;&#x4F3C;flyable&#x8FD9;&#x6837;&#x7684;&#x63A5;&#x53E3;&#x540D;&#xFF0C;&#x5982;&#x679C;&#x62BD;&#x8C61;&#x7684;&#x540D;&#x79F0;&#x662F;&#x4E00;&#x4E2A;&#x540D;&#x8BCD;&#xFF0C;&#x53EF;&#x4EE5;&#x8003;&#x8651;&#x8FD9;&#x662F;&#x5426;&#x662F;&#x4E00;&#x4E2A;&#x62BD;&#x8C61;&#x7C7B;&#xFF0C;&#x5982;&#x679C;&#x662F;&#x4E00;&#x4E2A;&#x5F62;&#x5BB9;&#x8BCD;&#x6216;&#x8005;&#x52A8;&#x8BCD;&#xFF0C;&#x53EF;&#x4EE5;&#x8003;&#x8651;&#x8FD9;&#x662F;&#x5426;&#x662F;&#x4E00;&#x4E2A;&#x63A5;&#x53E3;&#x3002;</p>
<p>&#xA0; &#xA0; PartViewHolder&#x7684;&#x5B9E;&#x73B0;&#x5982;&#x4E0B;&#xFF1A;</p>
<div class="cnblogs_code">
<pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">abstract</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> PartViewHolder {
</span><span style="color: #008080;"> 2</span> 
<span style="color: #008080;"> 3</span>    <span style="color: #0000ff;">protected</span><span style="color: #000000;"> View rootView;
</span><span style="color: #008080;"> 4</span> 
<span style="color: #008080;"> 5</span>    <span style="color: #0000ff;">protected</span><span style="color: #000000;"> LayoutInflater inflater;
</span><span style="color: #008080;"> 6</span> 
<span style="color: #008080;"> 7</span>    <span style="color: #0000ff;">public</span><span style="color: #000000;"> PartViewHolder(LayoutInflater inflater) {
</span><span style="color: #008080;"> 8</span> 
<span style="color: #008080;"> 9</span>       <span style="color: #0000ff;">this</span>.inflater =<span style="color: #000000;"> inflater;
</span><span style="color: #008080;">10</span> 
<span style="color: #008080;">11</span> <span style="color: #000000;">   }
</span><span style="color: #008080;">12</span> 
<span style="color: #008080;">13</span>    <span style="color: #0000ff;">protected</span> <span style="color: #0000ff;">abstract</span><span style="color: #000000;"> View getRootView();
</span><span style="color: #008080;">14</span> 
<span style="color: #008080;">15</span>    <span style="color: #0000ff;">protected</span> <span style="color: #0000ff;">abstract</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> bindViews();
</span><span style="color: #008080;">16</span> 
<span style="color: #008080;">17</span>    <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">abstract</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> resetView();
</span><span style="color: #008080;">18</span> 
<span style="color: #008080;">19</span> }</pre>
</div>
<p>&#xA0; &#xA0; &#xA0;&#x6211;&#x4EEC;&#x8FD9;&#x91CC;&#x5E76;&#x6CA1;&#x6709;&#x4F20;&#x5165;Activity&#x7684;Context&#xFF0C;&#x5F88;&#x591A;&#x4EBA;&#x5728;&#x5B9E;&#x73B0;&#x6709;&#x5173;View&#x7684;&#x81EA;&#x5B9A;&#x4E49;&#x65F6;&#x5019;&#xFF0C;&#x4E3A;&#x4E86;&#x65B9;&#x4FBF;&#xFF0C;&#x90FD;&#x4F1A;&#x4F20;&#x5165;Context&#xFF0C;&#x56E0;&#x4E3A;LayoutInflater&#x9700;&#x8981;&#x901A;&#x8FC7;Context&#x6765;&#x83B7;&#x53D6;&#xFF0C;&#x4F46;&#x5982;&#x679C;&#x4E0D;&#x662F;&#x4E3A;&#x4E86;&#x5728;&#x5E03;&#x5C40;&#x4E2D;&#x6E32;&#x67D3;&#xFF0C;&#x53EF;&#x4EE5;&#x4E0D;&#x7528;&#x4F20;Context&#x7684;&#xFF0C;&#x8FD9;&#x4E5F;&#x662F;&#x4E3A;&#x4E86;&#x9632;&#x6B62;&#x5185;&#x5B58;&#x6CC4;&#x9732;&#x7684;&#x65B9;&#x6CD5;&#x3002;</p>
<p>&#xA0; &#xA0; &#xA0;&#x4F20;&#x5165;&#x7684;rootView&#x662F;&#x4E3A;&#x4E86;&#x63D0;&#x4F9B;View&#x8981;&#x6DFB;&#x52A0;&#x5230;&#x7684;root&#x4E0A;&#xFF0C;&#x800C;bindViews&#x662F;&#x4E3A;&#x4E86;&#x521D;&#x59CB;&#x5316;&#x63A7;&#x4EF6;&#xFF0C;resetView&#x63D0;&#x4F9B;&#x4E86;View&#x7684;&#x6E05;&#x7406;&#x3002;</p>
<p>&#xA0; &#xA0; &#xA0;&#x6211;&#x4EEC;&#x73B0;&#x5728;&#x6765;&#x5B9E;&#x73B0;&#x4E00;&#x4E2A;PartViewHolder&#x7684;&#x5B50;&#x7C7B;&#x3002;</p>
<div class="cnblogs_code">
<pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span> LoginViewHolder <span style="color: #0000ff;">extends</span><span style="color: #000000;"> PartViewHolder {
</span><span style="color: #008080;"> 2</span>     <span style="color: #0000ff;">private</span><span style="color: #000000;"> LinearLayout llLogin;
</span><span style="color: #008080;"> 3</span>     <span style="color: #0000ff;">private</span><span style="color: #000000;"> LinearLayout llRegister;
</span><span style="color: #008080;"> 4</span>     <span style="color: #0000ff;">public</span><span style="color: #000000;"> LoginViewHolder(LayoutInflater inflater) {
</span><span style="color: #008080;"> 5</span>         <span style="color: #0000ff;">super</span><span style="color: #000000;">(inflater);
</span><span style="color: #008080;"> 6</span>         rootView = inflater.inflate(R.layout.view_login_register, <span style="color: #0000ff;">null</span><span style="color: #000000;">);
</span><span style="color: #008080;"> 7</span>         rootView.setTag(<span style="color: #0000ff;">false</span><span style="color: #000000;">);
</span><span style="color: #008080;"> 8</span> <span style="color: #000000;">    }
</span><span style="color: #008080;"> 9</span> <span style="color: #000000;">    @Override
</span><span style="color: #008080;">10</span>     <span style="color: #0000ff;">protected</span><span style="color: #000000;"> View getRootView() {
</span><span style="color: #008080;">11</span>         <span style="color: #0000ff;">return</span><span style="color: #000000;"> rootView;
</span><span style="color: #008080;">12</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">13</span> <span style="color: #000000;">    @Override
</span><span style="color: #008080;">14</span>     <span style="color: #0000ff;">protected</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> bindViews() {
</span><span style="color: #008080;">15</span>         llLogin =<span style="color: #000000;"> (LinearLayout) rootView.findViewById(R.id.ll_login);
</span><span style="color: #008080;">16</span>         llRegister =<span style="color: #000000;"> (LinearLayout) rootView.findViewById(R.id.ll_register);
</span><span style="color: #008080;">17</span>         llLogin.setOnClickListener(<span style="color: #0000ff;">new</span><span style="color: #000000;"> View.OnClickListener() {
</span><span style="color: #008080;">18</span> <span style="color: #000000;">            @Override
</span><span style="color: #008080;">19</span>             <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> onClick(View v) {
</span><span style="color: #008080;">20</span> <span style="color: #000000;">               ...
</span><span style="color: #008080;">21</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">22</span> <span style="color: #000000;">        });
</span><span style="color: #008080;">23</span>         llRegister.setOnClickListener(<span style="color: #0000ff;">new</span><span style="color: #000000;"> View.OnClickListener() {
</span><span style="color: #008080;">24</span> <span style="color: #000000;">            @Override
</span><span style="color: #008080;">25</span>             <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> onClick(View v) {
</span><span style="color: #008080;">26</span> <span style="color: #000000;">               ...
</span><span style="color: #008080;">27</span> <span style="color: #000000;">            }
</span><span style="color: #008080;">28</span> <span style="color: #000000;">        });
</span><span style="color: #008080;">29</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">30</span> <span style="color: #000000;">    @Override
</span><span style="color: #008080;">31</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> resetView() {
</span><span style="color: #008080;">32</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">33</span> }</pre>
</div>
<p>&#xA0; &#xA0; &#xA0;&#x4E0A;&#x9762;&#x5B9E;&#x73B0;&#x7684;&#x5C31;&#x662F;&#x4E00;&#x4E2A;&#x767B;&#x5F55;&#x7684;&#x9875;&#x9762;&#x3002;</p>
<p>&#xA0; &#xA0; &#xA0;&#x6211;&#x4EEC;&#x5728;&#x6784;&#x9020;&#x5668;&#x4E2D;&#x6307;&#x5B9A;rootView&#xFF0C;&#x7136;&#x540E;&#x901A;&#x8FC7;getRootView&#x8FD4;&#x56DE;rootView&#xFF0C;&#x4EE5;&#x4FBF;&#x4E0A;&#x5C42;&#x4E1A;&#x52A1;&#x80FD;&#x591F;&#x5BF9;rootView&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#xFF0C;bindViews&#x8FDB;&#x884C;&#x7EC4;&#x4EF6;&#x7684;&#x521D;&#x59CB;&#x5316;&#x548C;&#x4E8B;&#x4EF6;&#x7684;&#x76D1;&#x542C;&#x3002;</p>
<p>&#xA0; &#xA0; &#xA0;PartViewHolder&#x5C31;&#x662F;&#x7528;&#x6765;&#x8D1F;&#x8D23;View&#x7684;&#x521D;&#x59CB;&#x5316;&#x548C;&#x5BF9;&#x5E94;&#x7684;&#x64CD;&#x4F5C;&#x3002;</p>
<p>&#xA0; &#xA0; &#xA0;&#x6211;&#x4EEC;&#x6765;&#x770B;&#x4E00;&#x4E2A;&#x6700;&#x91CD;&#x8981;&#x7684;&#x7C7B;&#xFF1A;ViewManager&#xFFFD;&#xFFFD;&#xFFFD;</p>
<p>&#xA0; &#xA0; &#xA0;ViewHolderManager&#x7684;&#x5B9E;&#x73B0;&#x5982;&#x4E0B;&#xFF1A;</p>
<div class="cnblogs_code">
<pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> ViewHolderManager {
</span><span style="color: #008080;"> 2</span>     <span style="color: #0000ff;">private</span> <span style="color: #0000ff;">static</span> Map&lt;String, PartViewHolder&gt;<span style="color: #000000;"> viewMap;
</span><span style="color: #008080;"> 3</span>     <span style="color: #0000ff;">private</span> <span style="color: #0000ff;">static</span> Map&lt;String, PartInnerViewHolder&gt;<span style="color: #000000;"> innerViewMap;
</span><span style="color: #008080;"> 4</span>     <span style="color: #0000ff;">public</span><span style="color: #000000;"> ViewHolderManager() {
</span><span style="color: #008080;"> 5</span>         <span style="color: #0000ff;">if</span>(viewMap == <span style="color: #0000ff;">null</span><span style="color: #000000;">) {
</span><span style="color: #008080;"> 6</span>             viewMap = <span style="color: #0000ff;">new</span> HashMap&lt;&gt;<span style="color: #000000;">();
</span><span style="color: #008080;"> 7</span> <span style="color: #000000;">        }
</span><span style="color: #008080;"> 8</span>         <span style="color: #0000ff;">if</span>(innerViewMap == <span style="color: #0000ff;">null</span><span style="color: #000000;">) {
</span><span style="color: #008080;"> 9</span>             innerViewMap = <span style="color: #0000ff;">new</span> HashMap&lt;&gt;<span style="color: #000000;">();
</span><span style="color: #008080;">10</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">11</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">12</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> add(String key, PartViewHolder viewHolder) {
</span><span style="color: #008080;">13</span> <span style="color: #000000;">        viewMap.put(key, viewHolder);
</span><span style="color: #008080;">14</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">15</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> addInner(String innerKey, PartInnerViewHolder viewHolder) {
</span><span style="color: #008080;">16</span> <span style="color: #000000;">        innerViewMap.put(innerKey, viewHolder);
</span><span style="color: #008080;">17</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">18</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span> showView(ViewGroup viewGroup, String key) <span style="color: #0000ff;">throws</span><span style="color: #000000;"> Exception {
</span><span style="color: #008080;">19</span>         <span style="color: #0000ff;">if</span> (viewMap.size() == 0<span style="color: #000000;">) {
</span><span style="color: #008080;">20</span>             <span style="color: #0000ff;">throw</span> <span style="color: #0000ff;">new</span> Exception(&quot;You have not add any views&quot;<span style="color: #000000;">);
</span><span style="color: #008080;">21</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">22</span>         <span style="color: #0000ff;">if</span> (viewGroup == <span style="color: #0000ff;">null</span><span style="color: #000000;">) {
</span><span style="color: #008080;">23</span>             <span style="color: #0000ff;">throw</span> <span style="color: #0000ff;">new</span> Exception(&quot;not rootView&quot;<span style="color: #000000;">);
</span><span style="color: #008080;">24</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">25</span>         <span style="color: #0000ff;">if</span> (viewGroup.getChildCount() &gt; 0<span style="color: #000000;">) {
</span><span style="color: #008080;">26</span> <span style="color: #000000;">            viewGroup.removeAllViews();
</span><span style="color: #008080;">27</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">28</span>         PartViewHolder viewHolder =<span style="color: #000000;"> viewMap.get(key);
</span><span style="color: #008080;">29</span> <span style="color: #000000;">        viewGroup.addView(viewHolder.getRootView());
</span><span style="color: #008080;">30</span>         <span style="color: #0000ff;">if</span> (!(<span style="color: #0000ff;">boolean</span><span style="color: #000000;">) viewHolder.getRootView().getTag()) {
</span><span style="color: #008080;">31</span> <span style="color: #000000;">            viewHolder.bindViews();
</span><span style="color: #008080;">32</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">33</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">34</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span> showInnerView(String innerKey) <span style="color: #0000ff;">throws</span><span style="color: #000000;"> Exception {
</span><span style="color: #008080;">35</span>         <span style="color: #0000ff;">if</span> (viewMap.size() == 0<span style="color: #000000;">) {
</span><span style="color: #008080;">36</span>             <span style="color: #0000ff;">throw</span> <span style="color: #0000ff;">new</span> Exception(&quot;You have not add any views&quot;<span style="color: #000000;">);
</span><span style="color: #008080;">37</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">38</span>         PartInnerViewHolder viewHolder =<span style="color: #000000;"> innerViewMap.get(innerKey);
</span><span style="color: #008080;">39</span>         ViewGroup viewGroup =<span style="color: #000000;"> (ViewGroup) viewHolder.getRootView();
</span><span style="color: #008080;">40</span>         <span style="color: #0000ff;">if</span> (viewGroup.getChildCount() &gt; 0<span style="color: #000000;">) {
</span><span style="color: #008080;">41</span> <span style="color: #000000;">            viewGroup.removeAllViews();
</span><span style="color: #008080;">42</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">43</span> <span style="color: #000000;">        viewGroup.addView(viewHolder.getInnerRootView());
</span><span style="color: #008080;">44</span>         <span style="color: #0000ff;">if</span> (!(<span style="color: #0000ff;">boolean</span><span style="color: #000000;">) viewHolder.getInnerRootView().getTag()) {
</span><span style="color: #008080;">45</span> <span style="color: #000000;">            viewHolder.bindInnerViews();
</span><span style="color: #008080;">46</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">47</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">48</span>     <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> resetView(String key) {
</span><span style="color: #008080;">49</span>         <span style="color: #0000ff;">if</span><span style="color: #000000;"> (viewMap.containsKey(key)) {
</span><span style="color: #008080;">50</span>             PartViewHolder viewHolder =<span style="color: #000000;"> viewMap.get(key);
</span><span style="color: #008080;">51</span> <span style="color: #000000;">            viewHolder.resetView();
</span><span style="color: #008080;">52</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">53</span>         <span style="color: #0000ff;">if</span><span style="color: #000000;"> (innerViewMap.containsKey(key)) {
</span><span style="color: #008080;">54</span>             PartInnerViewHolder viewHolder =<span style="color: #000000;"> innerViewMap.get(key);
</span><span style="color: #008080;">55</span> <span style="color: #000000;">            viewHolder.resetView();
</span><span style="color: #008080;">56</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">57</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">58</span> }</pre>
</div>
<p>&#xA0; &#xA0;ViewHolderManager&#x8D1F;&#x8D23;&#x7EF4;&#x62A4;&#x4E00;&#x4E2A;HashMap&#xFF0C;&#x8FD9;&#x4E2A;HashMap&#x5B58;&#x653E;&#x7684;&#x662F;&#x5404;&#x79CD;PartViewHolder&#x3002;&#x548C;FragmentManager&#x7C7B;&#x4F3C;&#xFF0C;&#x901A;&#x8FC7;add&#x6DFB;&#x52A0;&#x5BF9;&#x5E94;&#x7684;PartViewHolder&#xFF0C;&#x7136;&#x540E;&#x5728;&#x8C03;&#x7528;showView&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x901A;&#x8FC7;id&#x6765;&#x6307;&#x5B9A;&#x8981;&#x5C55;&#x793A;&#x7684;PartViewHolder&#x3002;</p>
<p>&#xA0; &#xA0;&#x6211;&#x4EEC;&#x7684;&#x505A;&#x6CD5;&#x5F88;&#x7B80;&#x5355;&#xFF0C;&#x5C31;&#x662F;&#x5728;&#x6307;&#x5B9A;&#x7684;ViewGroup&#x4E2D;&#x6DFB;&#x52A0;rootView&#xFF0C;&#x6765;&#x8FBE;&#x5230;&#x5C06;&#x9700;&#x8981;&#x7684;View&#x5C55;&#x793A;&#x5728;&#x5E03;&#x5C40;&#x4E0A;&#x7684;&#x76EE;&#x7684;&#xFFFD;&#xFFFD;&#xFFFD;&#x5728;&#x6DFB;&#x52A0;&#x4E4B;&#x524D;&#xFF0C;&#x8981;&#x5224;&#x65AD;&#x662F;&#x5426;&#x5DF2;&#x7ECF;&#x6DFB;&#x52A0;&#x8FC7;&#x4E86;&#xFF0C;&#x5982;&#x679C;&#x6709;&#xFF0C;&#x5C31;&#x8981;remove&#x6389;&#x3002;</p>
<p>&#xA0; &#xA0;&#x8FD9;&#x91CC;&#x6211;&#x4EEC;&#x8FD8;&#x589E;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;PartInnerViewHolder&#xFF0C;&#x8FD9;&#x662F;&#x5BF9;&#x5E94;Fragment&#x672C;&#x8EAB;&#x4E5F;&#x53EF;&#x4EE5;&#x6DFB;&#x52A0;Fragment&#x7684;&#x60C5;&#x51B5;&#x3002;</p>
<div class="cnblogs_code">
<pre><span style="color: #008080;"> 1</span> <span style="color: #0000ff;">public</span> <span style="color: #0000ff;">abstract</span> <span style="color: #0000ff;">class</span><span style="color: #000000;"> PartInnerViewHolder{
</span><span style="color: #008080;"> 2</span>     <span style="color: #0000ff;">protected</span><span style="color: #000000;"> View rootView;
</span><span style="color: #008080;"> 3</span>     <span style="color: #0000ff;">protected</span><span style="color: #000000;"> View innerRootView;
</span><span style="color: #008080;"> 4</span>     <span style="color: #0000ff;">protected</span><span style="color: #000000;"> LayoutInflater inflater;
</span><span style="color: #008080;"> 5</span>     <span style="color: #0000ff;">public</span><span style="color: #000000;"> PartInnerViewHolder(LayoutInflater inflater, View rootView){
</span><span style="color: #008080;"> 6</span>         <span style="color: #0000ff;">this</span>.inflater =<span style="color: #000000;"> inflater;
</span><span style="color: #008080;"> 7</span>         <span style="color: #0000ff;">this</span>.rootView =<span style="color: #000000;"> rootView;
</span><span style="color: #008080;"> 8</span> <span style="color: #000000;">    }
</span><span style="color: #008080;"> 9</span>     <span style="color: #0000ff;">protected</span> <span style="color: #0000ff;">abstract</span><span style="color: #000000;"> View getInnerRootView();
</span><span style="color: #008080;">10</span>     <span style="color: #0000ff;">protected</span> <span style="color: #0000ff;">abstract</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> bindInnerViews();
</span><span style="color: #008080;">11</span>     <span style="color: #0000ff;">protected</span> <span style="color: #0000ff;">abstract</span><span style="color: #000000;"> View getRootView();
</span><span style="color: #008080;">12</span>     <span style="color: #0000ff;">protected</span> <span style="color: #0000ff;">abstract</span> <span style="color: #0000ff;">void</span><span style="color: #000000;"> resetView();
</span><span style="color: #008080;">13</span> }</pre>
</div>
<p>&#xA0; &#xA0;&#x76F8;&#x6BD4;PartViewHolder&#xFF0C;PartInnerViewHolder&#x53EA;&#x4E0D;&#x8FC7;&#x662F;&#x589E;&#x52A0;&#x4E86;&#x4E00;&#x4E2A;innerRootView&#xFF0C;&#x7528;&#x4E8E;&#x6307;&#x5B9A;&#x8BE5;Fragment&#x672C;&#x8EAB;&#x7684;&#x5E03;&#x5C40;&#x3002;</p>
<p>&#xA0; &#xA0;&#x5230;&#x4E86;&#x73B0;&#x5728;&#xFF0C;&#x4E00;&#x4E2A;Fragment&#x7684;&#x7B80;&#x5355;&#x6A21;&#x4EFF;&#x54C1;&#x5DF2;&#x7ECF;&#x5B8C;&#x6210;&#x4E86;&#xFF0C;&#x5F53;&#x7136;&#xFF0C;&#x6211;&#x4EEC;&#x4E3A;&#x5565;&#x8981;&#x81EA;&#x5DF1;&#x9020;&#x8F6E;&#x5B50;&#x5462;&#xFF1F;&#x5728;&#x4F7F;&#x7528;&#x5D4C;&#x5957;Fragment&#x7684;&#x65F6;&#x5019;&#xFF0C;&#x9047;&#x5230;&#x4E86;&#x5F88;&#x591A;&#x95EE;&#x9898;&#xFF0C;&#x6BD4;&#x8F83;&#x76F4;&#x89C2;&#x7684;&#x5C31;&#x662F;APP&#x653E;&#x540E;&#x53F0;&#x540E;&#xFF0C;&#x5728;&#x5185;&#x5B58;&#x4E0D;&#x8DB3;&#x7684;&#x60C5;&#x51B5;&#x4E0B;&#xFF0C;&#x4F1A;&#x5BFC;&#x81F4;Fragment&#x91CD;&#x53E0;&#xFF0C;&#x8FD8;&#x6709;&#x5176;&#x4ED6;&#x5404;&#x79CD;&#x60C5;&#x51B5;&#xFF0C;&#x6240;&#x4EE5;&#x6211;&#x4EEC;&#x5C1D;&#x8BD5;&#x4E86;&#x5982;&#x4F55;&#x53BB;&#x6A21;&#x4EFF;&#x4E00;&#x4E2A;&#x6700;&#x7B80;&#x5316;&#x7684;Fragment&#xFF0C;&#x53EA;&#x662F;&#x5229;&#x7528;&#x5B83;View&#x590D;&#x7528;&#x8FD9;&#x4E2A;&#x7279;&#x6027;&#x800C;&#x4E0D;&#x6D89;&#x53CA;&#x5176;&#x4ED6;&#x590D;&#x6742;&#x7684;&#x7528;&#x6CD5;&#x3002;</p>
<p>&#xA0; &#xA0;</p></div><div id="MySignature"></div>
<div class="clear"></div>
<div id="blog_post_info_block">
<div id="BlogPostCategory"></div>
<div id="EntryTag"></div>
<div id="blog_post_info">
</div>
<div class="clear"></div>
<div id="post_next_prev"></div>
</div>


		</div>
		<div class="postDesc">posted @ <span id="post-date">2016-11-18 16:28</span> <a href="http://www.cnblogs.com/wenjiang/">&#x6587;&#x9171;</a> &#x9605;&#x8BFB;(<span id="post_view_count">...</span>) &#x8BC4;&#x8BBA;(<span id="post_comment_count">...</span>)  <a href="https://i.cnblogs.com/EditPosts.aspx?postid=6067562" rel="nofollow">&#x7F16;&#x8F91;</a> <a href="#" onclick="AddToWz(6067562);return false;">&#x6536;&#x85CF;</a></div>
	</div>
	<script type="text/javascript">var allowComments=true,cb_blogId=119535,cb_entryId=6067562,cb_blogApp=currentBlogApp,cb_blogUserGuid='f712c9f7-97af-e111-aa3f-842b2b196315',cb_entryCreatedDate='2016/11/18 16:28:00';loadViewCount(cb_entryId);</script>
	
</div><!--end: topics 文章、评论容器-->
</div><a name="!comments"></a><div id="blog-comments-placeholder"></div><script type="text/javascript">var commentManager = new blogCommentManager();commentManager.renderComments(0);</script>
<div id="comment_form" class="commentform">
<a name="commentform"></a>
<div id="divCommentShow"></div>
<div id="comment_nav"><span id="span_refresh_tips"></span><a href="javascript:void(0);" onclick="return RefreshCommentList();" id="lnk_RefreshComments" runat="server" clientidmode="Static">&#x5237;&#x65B0;&#x8BC4;&#x8BBA;</a><a href="#" onclick="return RefreshPage();">&#x5237;&#x65B0;&#x9875;&#x9762;</a><a href="#top">&#x8FD4;&#x56DE;&#x9876;&#x90E8;</a></div>
<div id="comment_form_container"></div>
<div class="ad_text_commentbox" id="ad_text_under_commentbox"></div>
<div id="ad_t2"></div>
<div id="opt_under_post"></div>
<div id="ad_c1" class="c_ad_block"></div>
<div id="under_post_news"></div>
<div id="ad_c2" class="c_ad_block"></div>
<div id="under_post_kb"></div>
<div id="HistoryToday" class="c_ad_block"></div>
<script type="text/javascript">
    fixPostBody();
    setTimeout(function () { incrementViewCount(cb_entryId); }, 50);
    deliverAdT2();
    deliverAdC1();
    deliverAdC2();    
    loadNewsAndKb();
    loadBlogSignature();
    LoadPostInfoBlock(cb_blogId, cb_entryId, cb_blogApp, cb_blogUserGuid);
    GetPrevNextPost(cb_entryId, cb_blogId, cb_entryCreatedDate);
    loadOptUnderPost();
    GetHistoryToday(cb_blogId, cb_blogApp, cb_entryCreatedDate);   
</script>
</div>


	</div><!--end: forFlow -->
	</div><!--end: mainContent 主体内容容器-->

	<div id="sideBar">
		<div id="sideBarMain">
			
<!--done-->
<div class="newsItem">
<h3 class="catListTitle">&#x516C;&#x544A;</h3>
	<div id="blog-news"></div><script type="text/javascript">loadBlogNews();</script>
</div>

			<div id="blog-calendar" style="display:none"></div><script type="text/javascript">loadBlogDefaultCalendar();</script>
			
			<div id="leftcontentcontainer">
				<div id="blog-sidecolumn"></div><script type="text/javascript">loadBlogSideColumn();</script>
			</div>
			
		</div><!--end: sideBarMain -->
	</div><!--end: sideBar 侧边栏容器 -->
	<div class="clear"></div>
	